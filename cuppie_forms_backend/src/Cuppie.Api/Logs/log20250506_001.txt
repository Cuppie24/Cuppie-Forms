2025-05-06 19:30:44.752 +05:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-06 19:30:44.904 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-06 19:30:44.913 +05:00 [INF] Applying migration '20250506115428_InitialCreate'.
2025-05-06 19:31:07.097 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-06 19:31:07.157 +05:00 [INF] Model snapshot was not found in assembly 'Cuppie.Infrastructure'. Skipping pending model changes check.
2025-05-06 19:31:07.247 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-05-06 19:31:07.254 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-05-06 19:31:07.256 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-05-06 19:31:07.260 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-05-06 19:31:07.265 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-05-06 14:34:27.308 +00:00 [INF] Приложение запущено
2025-05-06 14:34:27.351 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'https://+:5001;http://+:5000'.
2025-05-06 14:34:27.544 +00:00 [INF] Now listening on: https://[::]:5001
2025-05-06 14:34:27.544 +00:00 [INF] Now listening on: http://[::]:5000
2025-05-06 14:34:27.545 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:34:27.545 +00:00 [INF] Hosting environment: Development
2025-05-06 14:34:27.545 +00:00 [INF] Content root path: /app
2025-05-06 14:34:31.735 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:34:31.760 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:31.763 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:34:31.770 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:34:31.934 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:34:31.986 +00:00 [ERR] Ошибка при извлечении данных из токена IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '05/06/2025 13:22:18', Current time (UTC): '05/06/2025 14:34:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Cuppie.Infrastructure.Services.JwtTokenService.ExtractClaimsPrincipal(String token) in C:\Users\Cuppie\RiderProjects\CuppieForms\cuppie_forms_backend\src\Cuppie.Infrastructure\Services\JwtTokenService.cs:line 109
   at Cuppie.Infrastructure.Services.AuthService.GetCurrentUserData(String token) in C:\Users\Cuppie\RiderProjects\CuppieForms\cuppie_forms_backend\src\Cuppie.Infrastructure\Services\AuthService.cs:line 107
2025-05-06 14:34:31.986 +00:00 [WRN] Не удалось получить данные из jwt куки
2025-05-06 14:34:31.990 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:34:32.012 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 239.7977ms
2025-05-06 14:34:32.021 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:34:32.024 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 290.1508ms
2025-05-06 14:34:35.791 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:34:35.793 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:35.795 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 3.3109ms
2025-05-06 14:34:35.799 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 38
2025-05-06 14:34:35.800 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:35.801 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:34:35.808 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:34:35.827 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:34:36.452 +00:00 [INF] Executed DbCommand (30ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:34:36.463 +00:00 [WRN] Неверный логин или пароль для пользователя: cup
2025-05-06 14:34:36.464 +00:00 [INF] Неверный логин или пароль
2025-05-06 14:34:36.465 +00:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-05-06 14:34:36.466 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 658.3554ms
2025-05-06 14:34:36.467 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:34:36.471 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 401 null text/plain; charset=utf-8 672.2918ms
2025-05-06 14:34:39.877 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:34:39.879 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:39.880 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:34:39.881 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:34:39.885 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:34:39.886 +00:00 [ERR] Ошибка при извлечении данных из токена IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '05/06/2025 13:22:18', Current time (UTC): '05/06/2025 14:34:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Cuppie.Infrastructure.Services.JwtTokenService.ExtractClaimsPrincipal(String token) in C:\Users\Cuppie\RiderProjects\CuppieForms\cuppie_forms_backend\src\Cuppie.Infrastructure\Services\JwtTokenService.cs:line 109
   at Cuppie.Infrastructure.Services.AuthService.GetCurrentUserData(String token) in C:\Users\Cuppie\RiderProjects\CuppieForms\cuppie_forms_backend\src\Cuppie.Infrastructure\Services\AuthService.cs:line 107
2025-05-06 14:34:39.886 +00:00 [WRN] Не удалось получить данные из jwt куки
2025-05-06 14:34:39.887 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:34:39.887 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 6.0224ms
2025-05-06 14:34:39.888 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:34:39.888 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 10.7925ms
2025-05-06 14:34:57.986 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:34:57.987 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:57.987 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 1.1144ms
2025-05-06 14:34:57.990 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:34:57.990 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:34:57.990 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:34:57.993 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:34:58.020 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:34:58.021 +00:00 [INF] Регистрация нового пользователя: cup
2025-05-06 14:34:58.103 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Binary), @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "User" ("Email", "PasswordHash", "Salt", "Username")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2025-05-06 14:34:58.119 +00:00 [INF] Пользователь успешно зарегистрирован: cup
2025-05-06 14:34:58.120 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Domain.Entities.UserEntity'.
2025-05-06 14:34:58.130 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 136.2416ms
2025-05-06 14:34:58.130 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:34:58.131 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 200 null application/json; charset=utf-8 141.2041ms
2025-05-06 14:35:05.203 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:35:05.204 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:35:05.204 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 0.9079ms
2025-05-06 14:35:05.207 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 38
2025-05-06 14:35:05.207 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:35:05.207 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:35:05.208 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:35:05.209 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:35:05.247 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:35:05.254 +00:00 [INF] Сгенерирован токен для пользователя cup, длина токена: 343
2025-05-06 14:35:05.256 +00:00 [INF] Логин прошел успешно, jwt куки отправлено
2025-05-06 14:35:05.256 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-06 14:35:05.257 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 49.077ms
2025-05-06 14:35:05.257 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:35:05.258 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 200 null text/plain; charset=utf-8 50.7712ms
2025-05-06 14:35:05.263 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:35:05.263 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:35:05.264 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:35:05.264 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:35:05.264 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:35:05.270 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Application.DTOs.SafeUserDataDto'.
2025-05-06 14:35:05.271 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 6.3958ms
2025-05-06 14:35:05.271 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:35:05.271 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 200 null application/json; charset=utf-8 8.0235ms
2025-05-06 14:44:56.964 +00:00 [INF] Application is shutting down...
2025-05-06 14:44:59.479 +00:00 [INF] Приложение запущено
2025-05-06 14:44:59.526 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'https://+:5001;http://+:5000'.
2025-05-06 14:44:59.789 +00:00 [INF] Now listening on: https://[::]:5001
2025-05-06 14:44:59.790 +00:00 [INF] Now listening on: http://[::]:5000
2025-05-06 14:44:59.791 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:44:59.791 +00:00 [INF] Hosting environment: Development
2025-05-06 14:44:59.791 +00:00 [INF] Content root path: /app
2025-05-06 14:45:13.292 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:45:13.322 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:45:13.325 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:45:13.332 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:45:13.495 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:45:13.496 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:45:13.500 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:45:13.523 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 188.5368ms
2025-05-06 14:45:13.532 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:45:13.534 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 244.165ms
2025-05-06 14:45:17.572 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:45:17.574 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:45:17.575 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 3.7907ms
2025-05-06 14:45:17.580 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 41
2025-05-06 14:45:17.582 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:45:17.583 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:45:17.600 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:45:17.621 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:45:18.327 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:45:18.339 +00:00 [WRN] Неверный логин или пароль для пользователя: cupcup
2025-05-06 14:45:18.340 +00:00 [INF] Неверный логин или пароль
2025-05-06 14:45:18.342 +00:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-05-06 14:45:18.343 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 741.6779ms
2025-05-06 14:45:18.343 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:45:18.348 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 401 null text/plain; charset=utf-8 767.19ms
2025-05-06 14:45:36.441 +00:00 [INF] Application is shutting down...
2025-05-06 14:46:04.634 +00:00 [INF] Приложение запущено
2025-05-06 14:46:04.679 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'https://+:5001;http://+:5000'.
2025-05-06 14:46:04.899 +00:00 [INF] Now listening on: https://[::]:5001
2025-05-06 14:46:04.900 +00:00 [INF] Now listening on: http://[::]:5000
2025-05-06 14:46:04.901 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:46:04.901 +00:00 [INF] Hosting environment: Development
2025-05-06 14:46:04.901 +00:00 [INF] Content root path: /app
2025-05-06 14:46:17.637 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:46:17.665 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:46:17.669 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:46:17.676 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:46:17.832 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:46:17.834 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:46:17.837 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:46:17.861 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 182.006ms
2025-05-06 14:46:17.869 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:46:17.871 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 236.5207ms
2025-05-06 14:46:21.600 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:46:21.602 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:46:21.603 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 3.022ms
2025-05-06 14:46:21.606 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 41
2025-05-06 14:46:21.608 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:46:21.608 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:46:21.618 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:46:21.638 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:46:22.301 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:46:22.312 +00:00 [WRN] Неверный логин или пароль для пользователя: cupcup
2025-05-06 14:46:22.313 +00:00 [INF] Неверный логин или пароль
2025-05-06 14:46:22.314 +00:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-05-06 14:46:22.316 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 697.0475ms
2025-05-06 14:46:22.316 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:46:22.321 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 401 null text/plain; charset=utf-8 714.2712ms
2025-05-06 14:49:04.913 +00:00 [INF] Application is shutting down...
2025-05-06 14:49:28.870 +00:00 [INF] Приложение запущено
2025-05-06 14:49:28.908 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'https://+:5001;http://+:5000'.
2025-05-06 14:49:29.135 +00:00 [INF] Now listening on: https://[::]:5001
2025-05-06 14:49:29.136 +00:00 [INF] Now listening on: http://[::]:5000
2025-05-06 14:49:29.136 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:49:29.136 +00:00 [INF] Hosting environment: Development
2025-05-06 14:49:29.136 +00:00 [INF] Content root path: /app
2025-05-06 14:49:32.635 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:49:32.659 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:32.662 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 27.9957ms
2025-05-06 14:49:32.672 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 41
2025-05-06 14:49:32.677 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:32.680 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:32.692 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:32.860 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:49:33.542 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:49:33.553 +00:00 [WRN] Неверный логин или пароль для пользователя: cupcup
2025-05-06 14:49:33.555 +00:00 [INF] Неверный логин или пароль
2025-05-06 14:49:33.559 +00:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-05-06 14:49:33.562 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 868.1058ms
2025-05-06 14:49:33.563 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:33.568 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 401 null text/plain; charset=utf-8 896.1015ms
2025-05-06 14:49:35.770 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:49:35.775 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:35.776 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:35.779 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:35.781 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:49:35.783 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:49:35.784 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:49:35.800 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 20.8352ms
2025-05-06 14:49:35.801 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:35.801 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 31.1793ms
2025-05-06 14:49:40.126 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:49:40.127 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:40.128 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 1.1075ms
2025-05-06 14:49:40.131 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 38
2025-05-06 14:49:40.131 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:40.132 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:40.132 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:40.136 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:49:40.149 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:49:40.203 +00:00 [INF] Сгенерирован токен для пользователя cup, длина токена: 343
2025-05-06 14:49:40.204 +00:00 [INF] Логин прошел успешно, jwt куки отправлено
2025-05-06 14:49:40.205 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-06 14:49:40.205 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 72.6914ms
2025-05-06 14:49:40.205 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:40.206 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 200 null text/plain; charset=utf-8 75.3642ms
2025-05-06 14:49:40.211 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:49:40.211 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:40.212 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:40.212 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:40.213 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:49:40.231 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Application.DTOs.SafeUserDataDto'.
2025-05-06 14:49:40.232 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 20.129ms
2025-05-06 14:49:40.233 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:40.233 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 200 null application/json; charset=utf-8 22.2834ms
2025-05-06 14:49:47.991 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:49:47.992 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:47.993 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:47.993 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:47.994 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:49:47.996 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Application.DTOs.SafeUserDataDto'.
2025-05-06 14:49:47.997 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 3.1043ms
2025-05-06 14:49:47.998 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:47.998 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 200 null application/json; charset=utf-8 6.7146ms
2025-05-06 14:49:54.243 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:49:54.244 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:54.244 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:54.245 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:54.246 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:49:54.246 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:49:54.247 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:49:54.248 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 2.4375ms
2025-05-06 14:49:54.248 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:49:54.248 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 5.3201ms
2025-05-06 14:49:57.340 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:49:57.341 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:57.342 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 1.3412ms
2025-05-06 14:49:57.345 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 41
2025-05-06 14:49:57.345 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:49:57.346 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:57.346 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:49:57.347 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:49:57.389 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:49:57.389 +00:00 [WRN] Неверный логин или пароль для пользователя: cupcup
2025-05-06 14:49:57.390 +00:00 [INF] Неверный логин или пароль
2025-05-06 14:49:57.391 +00:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-05-06 14:49:57.391 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 44.8524ms
2025-05-06 14:49:57.391 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:49:57.392 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 401 null text/plain; charset=utf-8 46.9786ms
2025-05-06 14:50:18.629 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:50:18.630 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:18.631 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:50:18.631 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:18.632 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:50:18.632 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:50:18.632 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:50:18.633 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 1.8917ms
2025-05-06 14:50:18.633 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:50:18.634 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 4.6258ms
2025-05-06 14:50:27.325 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:50:27.325 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:27.326 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 0.8893ms
2025-05-06 14:50:27.329 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:50:27.329 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:27.329 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:27.335 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:27.358 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:50:27.359 +00:00 [WRN] Попытка зарегистрировать пользователя с уже существующим именем: cup
2025-05-06 14:50:27.360 +00:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2025-05-06 14:50:27.360 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 24.777ms
2025-05-06 14:50:27.360 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:27.361 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 409 null text/plain; charset=utf-8 32.0747ms
2025-05-06 14:50:44.702 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:50:44.702 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:44.703 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 1.0337ms
2025-05-06 14:50:44.707 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:50:44.707 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:44.708 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:44.708 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:44.714 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:50:44.716 +00:00 [WRN] Попытка зарегистрировать пользователя с уже существующим именем: cup
2025-05-06 14:50:44.717 +00:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2025-05-06 14:50:44.718 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 9.7989ms
2025-05-06 14:50:44.719 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:44.719 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 409 null text/plain; charset=utf-8 12.3448ms
2025-05-06 14:50:45.915 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:50:45.916 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:45.916 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:45.916 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:45.918 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:50:45.919 +00:00 [WRN] Попытка зарегистрировать пользователя с уже существующим именем: cup
2025-05-06 14:50:45.919 +00:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2025-05-06 14:50:45.919 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 2.8107ms
2025-05-06 14:50:45.919 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:45.920 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 409 null text/plain; charset=utf-8 4.3909ms
2025-05-06 14:50:47.995 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:50:47.996 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:47.997 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:50:47.997 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:47.998 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:50:47.998 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:50:47.998 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:50:47.999 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 1.3055ms
2025-05-06 14:50:47.999 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:50:47.999 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 3.7199ms
2025-05-06 14:50:52.875 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:50:52.876 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:52.877 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 1.3327ms
2025-05-06 14:50:52.881 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:50:52.882 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:50:52.883 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:52.883 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:50:52.886 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:50:52.886 +00:00 [WRN] Попытка зарегистрировать пользователя с уже существующим именем: cup
2025-05-06 14:50:52.887 +00:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2025-05-06 14:50:52.887 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 3.834ms
2025-05-06 14:50:52.887 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:50:52.887 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 409 null text/plain; charset=utf-8 6.0368ms
2025-05-06 14:51:17.148 +00:00 [INF] Application is shutting down...
2025-05-06 14:51:26.277 +00:00 [INF] Приложение запущено
2025-05-06 14:51:26.316 +00:00 [WRN] Overriding HTTP_PORTS '8080' and HTTPS_PORTS ''. Binding to values defined by URLS instead 'https://+:5001;http://+:5000'.
2025-05-06 14:51:26.514 +00:00 [INF] Now listening on: https://[::]:5001
2025-05-06 14:51:26.515 +00:00 [INF] Now listening on: http://[::]:5000
2025-05-06 14:51:26.515 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-06 14:51:26.515 +00:00 [INF] Hosting environment: Development
2025-05-06 14:51:26.516 +00:00 [INF] Content root path: /app
2025-05-06 14:52:13.310 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:52:13.336 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:13.339 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:52:13.346 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:52:13.502 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:52:13.503 +00:00 [INF] Нет подходящего куки для авторизации
2025-05-06 14:52:13.507 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-05-06 14:52:13.531 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 182.1964ms
2025-05-06 14:52:13.540 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:52:13.542 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 401 null application/problem+json; charset=utf-8 234.0758ms
2025-05-06 14:52:19.266 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:52:19.268 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:19.269 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 3.0226ms
2025-05-06 14:52:19.272 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 60
2025-05-06 14:52:19.274 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:19.274 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:52:19.282 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:52:19.949 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:52:19.993 +00:00 [WRN] Попытка зарегистрировать пользователя с уже существующим именем: cup
2025-05-06 14:52:19.995 +00:00 [INF] Executing ConflictObjectResult, writing value of type 'System.String'.
2025-05-06 14:52:19.997 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 714.2697ms
2025-05-06 14:52:19.997 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:52:20.002 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 409 null text/plain; charset=utf-8 729.095ms
2025-05-06 14:52:27.876 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - null null
2025-05-06 14:52:27.877 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:27.877 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/register - 204 null null 1.3571ms
2025-05-06 14:52:27.880 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/register - application/json 63
2025-05-06 14:52:27.880 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:27.881 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:52:27.881 +00:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Cuppie.Application.DTOs.RegisterModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:52:27.898 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__registerModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__registerModel_Username_0
LIMIT 1
2025-05-06 14:52:27.899 +00:00 [INF] Регистрация нового пользователя: cupcup
2025-05-06 14:52:27.977 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Binary), @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "User" ("Email", "PasswordHash", "Salt", "Username")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2025-05-06 14:52:27.990 +00:00 [INF] Пользователь успешно зарегистрирован: cupcup
2025-05-06 14:52:27.991 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Domain.Entities.UserEntity'.
2025-05-06 14:52:28.002 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api) in 120.3949ms
2025-05-06 14:52:28.003 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Register (Cuppie.Api)'
2025-05-06 14:52:28.003 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/register - 200 null application/json; charset=utf-8 123.1608ms
2025-05-06 14:52:32.282 +00:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - null null
2025-05-06 14:52:32.282 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:32.283 +00:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/api/auth/login - 204 null null 1.1464ms
2025-05-06 14:52:32.286 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/auth/login - application/json 41
2025-05-06 14:52:32.286 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:32.286 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:52:32.289 +00:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Cuppie.Application.DTOs.LoginModelDto) on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:52:32.292 +00:00 [INF] Поступил запрос на api/auth/login
2025-05-06 14:52:32.333 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginModel_Username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Salt", u."Username"
FROM "User" AS u
WHERE u."Username" = @__loginModel_Username_0
LIMIT 1
2025-05-06 14:52:32.355 +00:00 [INF] Сгенерирован токен для пользователя cupcup, длина токена: 347
2025-05-06 14:52:32.356 +00:00 [INF] Логин прошел успешно, jwt куки отправлено
2025-05-06 14:52:32.357 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-06 14:52:32.357 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api) in 68.0849ms
2025-05-06 14:52:32.358 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.Login (Cuppie.Api)'
2025-05-06 14:52:32.358 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/auth/login - 200 null text/plain; charset=utf-8 72.3773ms
2025-05-06 14:52:32.362 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/auth/me - null null
2025-05-06 14:52:32.363 +00:00 [INF] CORS policy execution successful.
2025-05-06 14:52:32.363 +00:00 [INF] Executing endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:52:32.363 +00:00 [INF] Route matched with {action = "GetUserData", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUserData() on controller Cuppie.Api.Controllers.AuthController (Cuppie.Api).
2025-05-06 14:52:32.364 +00:00 [INF] Поступил запрос на api/auth/me
2025-05-06 14:52:32.380 +00:00 [INF] Executing OkObjectResult, writing value of type 'Cuppie.Application.DTOs.SafeUserDataDto'.
2025-05-06 14:52:32.381 +00:00 [INF] Executed action Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api) in 17.4305ms
2025-05-06 14:52:32.381 +00:00 [INF] Executed endpoint 'Cuppie.Api.Controllers.AuthController.GetUserData (Cuppie.Api)'
2025-05-06 14:52:32.382 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/auth/me - 200 null application/json; charset=utf-8 19.3049ms
